<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>ScanCarnet</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{ --bg:#f4f7fb; --card:#ffffff; --primary:#0a58ff; --accent1:#ff7a7a; --accent2:#6b8bff; --muted:#6b7280; --success:#34c759; --radius:14px; --shadow:0 12px 30px rgba(10,20,40,0.08); }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Roboto,Arial;background:linear-gradient(180deg,var(--bg),#ffffff);color:#062030;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}
  .app{width:100%;max-width:920px}
  .card{background:var(--card);border-radius:var(--radius);padding:20px;box-shadow:var(--shadow);text-align:center}
  .logo{width:84px;height:84px;border-radius:18px;background:linear-gradient(135deg,var(--primary),#00c6ff);display:inline-flex;align-items:center;justify-content:center;color:white;font-weight:800;font-size:28px;margin:0 auto 12px}
  h1{margin:6px 0 0 0;font-size:28px}
  .subtitle{color:#6b7280;margin-top:6px}
  .bigbtn{min-width:260px;padding:14px 18px;border-radius:12px;border:0;font-weight:800;font-size:1.05rem;color:white;cursor:pointer;background:linear-gradient(90deg,var(--success),#00d4a6);box-shadow:0 8px 20px rgba(10,88,255,0.12);}
  .smallbtn{margin-top:12px;background:#fff;border:1px solid rgba(0,0,0,0.06);padding:8px 12px;border-radius:10px;color:#6b7280;cursor:pointer;font-weight:600}
  .ghost{background:#fff;color:#0a58ff;border:1px solid rgba(0,102,255,0.08);padding:8px 10px;border-radius:10px;cursor:pointer;font-weight:600}
  .hidden{display:none}
  .exports{position:fixed;right:18px;bottom:18px;background:linear-gradient(135deg,#001d6e,#0047b3);color:white;padding:12px;border-radius:12px;display:flex;gap:8px;align-items:center;z-index:90}
  .exports button{background:transparent;border:1px solid rgba(255,255,255,0.12);color:white;padding:8px 10px;border-radius:10px;font-weight:700;cursor:pointer}
  .csv{background:linear-gradient(90deg,#ffbf00,#ff7a00);border:none;padding:10px 12px;border-radius:10px}
  .pdf{background:linear-gradient(90deg,#ec4899,#8b5cf6);border:none;padding:10px 12px;border-radius:10px}
  input,textarea{width:100%;padding:12px;border-radius:12px;border:1px solid #eef6ff;font-size:1rem;margin-top:8px;background:transparent}
  textarea{min-height:140px;white-space:pre-wrap}
  .center-col{display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center}
  footer{margin-top:18px;text-align:center;color:#6b7280;font-size:0.9rem}
  .help-pill{display:inline-flex;align-items:center;gap:8px;padding:10px 12px;border-radius:999px;background:linear-gradient(90deg,#ffffff,rgba(255,255,255,0.85));border:1px solid rgba(10,88,255,0.08);cursor:pointer;box-shadow:0 6px 18px rgba(10,88,255,0.06);font-weight:700;color:#0a58ff}
  .help-icon{width:18px;height:18px;border-radius:6px;display:inline-grid;place-items:center;background:linear-gradient(90deg,var(--accent1),#ffbf69);color:white;font-size:12px;font-weight:800}
  .profile-card{display:flex;flex-direction:column;align-items:center;gap:12px;padding:18px;border-radius:12px;background:linear-gradient(180deg,rgba(10,88,255,0.06),#fff);border:1px solid rgba(10,88,255,0.06)}
  .profile-hr{height:6px;width:70px;border-radius:6px;background:linear-gradient(90deg,var(--primary),#00c6ff);margin-bottom:6px}
  .input-row{display:flex;gap:10px;width:100%}
  .input-row input{flex:1}
  @media (max-width:720px){ .logo{width:64px;height:64px} .bigbtn{min-width:200px} .exports{right:12px;bottom:12px} .input-row{flex-direction:column} }
</style>
</head>
<body>
  <div class="app">
    <div class="card" id="panel-splash">
      <div class="logo">SC</div>
      <h1>ScanCarnet</h1>
      <div class="subtitle">Carnet d'entraînement</div>
      <div style="height:14px"></div>
      <button id="btnStart" class="bigbtn">Démarrer</button>
      <div style="height:10px"></div>
      <div class="center-col">
        <div style="display:flex;gap:8px;align-items:center">
          <button id="btnHelp" class="help-pill" aria-label="Aide">
            <span class="help-icon">?</span>
            Aide
          </button>
          <button id="btnResetTop" class="smallbtn">Réinitialiser</button>
        </div>
      </div>
    </div>

    <div class="card hidden" id="panel-profile">
      <div class="profile-card" style="width:100%;max-width:760px;margin:0 auto">
        <div class="profile-hr"></div>
        <h2 style="margin:0">Profil élève</h2>
        <div class="subtitle">Renseigne tes informations (sera inclus dans l'export)</div>
        <div style="height:6px"></div>
        <div class="input-row">
          <input id="nom" placeholder="Nom" />
          <input id="prenom" placeholder="Prénom" />
          <input id="classe" placeholder="Classe" />
        </div>
        <div style="height:8px"></div>
        <div style="display:flex;gap:10px;justify-content:center;width:100%">
          <button id="saveProfile" class="bigbtn" style="background:linear-gradient(90deg,var(--primary),#00a0ff)">Sauvegarder</button>
          <button id="backToSplash" class="smallbtn">Retour</button>
        </div>
      </div>
    </div>

    <div class="card hidden" id="panel-dashboard">
      <h2 id="profileLine">—</h2>
      <div class="subtitle" style="margin-bottom:12px">Ton carnet — actions</div>
      <div style="display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center">
        <button id="btnCycle" class="bigbtn" style="background:linear-gradient(90deg,var(--primary),#0096ff)">Cycle</button>
        <button id="btnWarmup" class="bigbtn" style="background:linear-gradient(90deg,var(--accent1),#ffb86b)">Échauffement</button>
        <button id="btnNew" class="bigbtn" style="background:linear-gradient(90deg,var(--success),#00d4a6)">Nouvelle séance</button>
        <button id="btnList" class="bigbtn" style="background:linear-gradient(90deg,var(--accent2),#6b8bff)">Voir séances</button>
      </div>
    </div>

    <div class="card hidden" id="panel-cycle">
      <h3>Cycle (APSA)</h3>
      <input id="cycleName" placeholder="Ex : Badminton" />
      <div style="height:8px"></div>
      <button id="createCycle" class="bigbtn" style="min-width:200px;background:linear-gradient(90deg,var(--primary),#0096ff)">Créer / Sélectionner</button>
      <div id="cycleList" style="margin-top:12px;text-align:left"></div>
      <div style="height:10px">
        <label class="smallbtn" for="importCSV">Importer un CSV sauvegardé</label>
        <input id="importCSV" type="file" accept=".csv,text/csv" style="display:none">
      </div>
      <div style="height:8px"></div>
      <button id="cycleBack" class="smallbtn">Retour</button>
    </div>

    <div class="card hidden" id="panel-warmup">
      <h3>Échauffement (lié au cycle)</h3>
      <div id="warmupCycleName" class="subtitle">—</div>
      <textarea id="warmText" placeholder="- Footing 8 min"></textarea>
      <div style="height:8px"></div>
      <button id="saveWarm" class="bigbtn" style="min-width:200px;background:linear-gradient(90deg,var(--accent1),#ffb86b)">Enregistrer</button>
      <div style="height:8px"></div>
      <button id="warmBack" class="smallbtn">Retour</button>
    </div>

    <div class="card hidden" id="panel-newsession">
      <h3>Nouvelle séance</h3>
      <div class="subtitle">Date ajoutée automatiquement (Europe/Luxembourg).</div>
      <textarea id="sessionText" placeholder="Décris la séance..."></textarea>
      <div style="height:8px"></div>
      <button id="saveSession" class="bigbtn" style="min-width:200px;background:linear-gradient(90deg,var(--success),#00d4a6)">Enregistrer séance</button>
      <div style="height:8px"></div>
      <button id="sessionBack" class="smallbtn">Retour</button>
    </div>

    <div class="card hidden" id="panel-list">
      <h3>Séances archivées</h3>
      <div id="sessionsContainer" style="margin-top:12px;text-align:left"></div>
      <div style="height:8px"></div>
      <button id="listBack" class="smallbtn">Retour</button>
    </div>

    <footer>ScanCarnet — Équipe EPS Lycée Vauban — LUXEMBOURG</footer>
  </div>

  <div class="exports" role="dialog" aria-label="Exports">
    <button class="csv" id="btnExportCSV">Exporter CSV</button>
    <button class="pdf" id="btnExportPDF">Générer PDF</button>
  </div>

  <div id="modalHelp" class="hidden" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(3,7,18,0.45);z-index:100;padding:20px">
    <div style="background:#fff;padding:18px;border-radius:12px;max-width:720px;box-shadow:0 10px 30px rgba(0,0,0,0.12);text-align:left">
      <div style="display:flex;justify-content:space-between;align-items:center"><strong>Aide — ScanCarnet</strong><button id="closeHelp" class="ghost">Fermer</button></div>
      <div style="height:8px"></div>
      <ol style="padding-left:18px">
        <li>Appuie sur <strong>Démarrer</strong> puis remplis ton profil.</li>
        <li>Créer / sélectionner un cycle (ex : Badminton).</li>
        <li>Ajouter un échauffement type si tu veux.</li>
        <li>Nouvelle séance → écrire → Enregistrer (date figée).</li>
        <li>Exporter CSV ou PDF (l'échauffement est inclus dans les exports).</li>
        <li>En cas de perte : <strong>Cycle → Importer un CSV sauvegardé</strong>.</li>
      </ol>
    </div>
  </div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="scancarnet-app.js"></script>
</body>
</html>
